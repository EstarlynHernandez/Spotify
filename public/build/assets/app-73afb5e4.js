window.onload=()=>{let r=document.querySelector("#miniPlayer"),l=document.querySelector("#fullPlayer"),c=document.querySelector("#headerPlayer");r.onclick=()=>{l.classList.remove("-bottom-12","h-0"),l.classList.add("bottom-0","h-screen")},c.onclick=()=>{l.classList.add("-bottom-12","h-0"),l.classList.remove("bottom-0","h-screen")},h()};function h(){let r=document.querySelector("#song"),l=document.querySelectorAll(".songs"),c=document.querySelectorAll(".playPause"),s=document.querySelectorAll(".songLike"),a=document.querySelectorAll(".nextSong"),y=document.querySelectorAll(".songTitle"),f=document.querySelectorAll(".songArtists"),i=document.querySelectorAll(".prevSong"),u=document.querySelectorAll(".songPosition"),n;c.forEach(e=>{e.onclick=o=>{o.stopPropagation(),r.paused?r.play():r.pause()}}),l.forEach(e=>{e.onclick=()=>{d(e)}}),s.forEach(e=>{e.onclick=o=>{o.stopPropagation();let t=Array.from(l).findIndex(g=>g.id===r.getAttribute("value"));l[t].getAttribute("like")?(e.src=window.location.origin+"/icons/heart.svg",l[t].removeAttribute("like")):(e.src=window.location.origin+"/icons/heart_full.svg",l[t].setAttribute("like",1))}});function d(e){r.src=window.location.origin+`/song/${e.getAttribute("value")}.mp3`,r.setAttribute("value",e.id),r.play(),miniPlayer.classList.remove("hidden");let o=document.querySelector(".songs.text-green-500");o&&o.classList.remove("text-green-500"),e.getAttribute("like")?s.forEach(t=>{t.src=window.location.origin+"/icons/heart_full.svg"}):s.forEach(t=>{t.src=window.location.origin+"/icons/heart.svg"}),e.classList.add("text-green-500"),y.forEach(t=>{t.innerText=e.innerText}),f.forEach(t=>{t.innerText=e.parentElement.querySelector("p").innerText}),u.forEach(t=>{t.style.width="0"})}a.forEach(e=>{e.onclick=()=>{let o=Array.from(l).findIndex(t=>t.id===r.getAttribute("value"));o<l.length-1?(d(l[o+1]),i.forEach(t=>{t.classList.remove("opacity-50")})):a.forEach(t=>{t.classList.add("opacity-50")})}}),i.forEach(e=>{e.onclick=()=>{let o=Array.from(l).findIndex(t=>t.id===r.getAttribute("value"));o!=0?(d(l[o-1]),a.forEach(t=>{t.classList.remove("opacity-50")})):i.forEach(t=>{t.classList.add("opacity-50")})}}),r.onended=()=>{clearInterval(n),u.forEach(e=>{e.style.width="0"}),c.forEach(e=>{e.src=e.src.replace("pause","play"),clearInterval(n)})},r.onplay=()=>{c.forEach(e=>{e.src=e.src.replace("play","pause"),clearInterval(n)}),n=setInterval(()=>{u.forEach(e=>{e.style.width=r.currentTime/r.duration*100+"%"})},500)},r.onpause=()=>{c.forEach(e=>{e.src=e.src.replace("pause","play"),clearInterval(n)})}}
